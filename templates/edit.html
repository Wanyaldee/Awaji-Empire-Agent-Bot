<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>編集 - {{ survey['title'] }}</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ css_ver }}">
</head>
<body>
    <div class="container">
        <div class="panel">
            <div class="panel-header">
                <h2><i class="fas fa-edit"></i> 編集 (ID: {{ survey['id'] }})</h2>
                <a href="{{ url_for('index') }}" class="btn btn-gray">戻る</a>
            </div>

            <form action="{{ url_for('survey.save_survey') }}" method="post" id="surveyForm">
                <input type="hidden" name="survey_id" value="{{ survey['id'] }}">
                <input type="hidden" name="questions_json" id="questionsJson">

                <label>アンケートタイトル</label>
                <input type="text" name="title" value="{{ survey['title'] }}" required style="font-weight:bold; margin-bottom:20px; font-size:1.2rem;">

                <div id="questionsContainer"></div>

                <button type="button" class="btn btn-blue" onclick="addQuestion()" style="margin:20px auto; display:block;">
                    <i class="fas fa-plus"></i> 質問を追加
                </button>

                <button type="submit" class="btn btn-green btn-block" style="padding:15px; font-size:1.1rem;">
                    保存して戻る
                </button>
            </form>
        </div>
    </div>

    <script>window.initialQuestions = {{ questions | tojson }};</script>
    <script src="{{ url_for('static', filename='js/edit_survey.js') }}?v={{ css_ver }}"></script>
</body>
</html>
